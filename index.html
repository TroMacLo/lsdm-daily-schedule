<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>LSDM Daily Schedule</title>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; background: #f0f1f4; color: #333; min-height: 100vh; }
  button { cursor: pointer; font-family: inherit; }
  input, select { font-family: inherit; }
  
  @media print {
    @page { size: 11in 17in landscape; margin: 0.4in 0.5in; }
    body { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; color-adjust: exact !important; background: #fff; }
    .no-print { display: none !important; }
    .print-area { max-width: none !important; padding: 0 !important; margin: 0 !important; background: #fff !important; box-shadow: none !important; border: none !important; border-radius: 0 !important; }
    .print-content { break-inside: avoid; }
    table { page-break-inside: auto; }
    tr { page-break-inside: avoid; page-break-after: auto; }
    thead { display: table-header-group; }
    .action-btn { display: none !important; }
  }
  @media screen {
    .print-area { background: #fff; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 8px 24px rgba(0,0,0,0.04); border: 1px solid #e5e7eb; }
  }
  
  /* Modal styles */
  .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 20px; }
  .modal { background: #fff; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 480px; width: 100%; max-height: 90vh; overflow: hidden; animation: modalSlide 0.2s ease-out; }
  @keyframes modalSlide { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
  .modal-header { padding: 20px 24px; border-bottom: 1px solid #e5e7eb; }
  .modal-header h2 { font-size: 18px; font-weight: 700; color: #1a1a2e; margin: 0; }
  .modal-body { padding: 24px; overflow-y: auto; max-height: 60vh; }
  .form-group { margin-bottom: 16px; }
  .form-group label { display: block; font-size: 12px; font-weight: 600; color: #666; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
  .form-group input, .form-group select { width: 100%; padding: 10px 12px; border: 1.5px solid #ddd; border-radius: 8px; font-size: 14px; transition: border-color 0.15s; }
  .form-group input:focus, .form-group select:focus { outline: none; border-color: #2680EB; }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .modal-footer { padding: 16px 24px; border-top: 1px solid #e5e7eb; display: flex; gap: 10px; justify-content: flex-end; }
  .btn { padding: 10px 20px; border-radius: 8px; border: none; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.15s; }
  .btn-primary { background: #2680EB; color: #fff; }
  .btn-primary:hover { background: #1a6dd6; }
  .btn-secondary { background: #f0f1f4; color: #555; }
  .btn-secondary:hover { background: #e5e7eb; }
  .btn-danger { background: #E63550; color: #fff; }
  .btn-danger:hover { background: #d12d45; }
  .btn-success { background: #12B89A; color: #fff; }
  .btn-success:hover { background: #0fa885; }
  
  /* Action buttons */
  .action-btn { opacity: 0; transition: opacity 0.15s; }
  tr:hover .action-btn { opacity: 1; }
  td:hover .action-btn { opacity: 1; }
  
  /* CSV Upload styles */
  .csv-dropzone { border: 2px dashed #ccc; border-radius: 8px; padding: 30px; text-align: center; transition: all 0.15s; cursor: pointer; }
  .csv-dropzone:hover, .csv-dropzone.dragover { border-color: #2680EB; background: #f8faff; }
  .csv-dropzone p { margin: 0; color: #666; font-size: 14px; }
  .csv-dropzone strong { color: #2680EB; }
</style>
</head>
<body>
<div id="root"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script>
const e = React.createElement;
const { useState, useMemo, useEffect, useRef } = React;

const DEFAULT_RAW = [
"SATURDAY CLASSES\n9:00 AM,,Dance With Me,BLUE,30 min\n9:15 AM,,Acro 1,BALLROOM,45 min\n9:15 AM,,Ballet 1,CORAL,45 min\n9:15 AM,,Creative Movement,YELLOW,30 min\n9:30 AM,,Ballet 2,TEAL,45 min\n9:30 AM,,Tap 2/3,BLUE,60 min\n9:45 AM,,Creative Movement,YELLOW,30 min\n10:00 AM,,Acro 2,BALLROOM,60 min\n10:00 AM,,Mighty Movers,CORAL,30 min\n10:15 AM,,Musical Theatre 2,TEAL,60 min\n10:30 AM,,Ballet 1,BLUE,45 min\n10:30 AM,,Creative Movement,CORAL,30 min\n10:45 AM,,Tap 1,YELLOW,45 min\n11:00 AM,,Acro 4,BALLROOM,60 min\n11:00 AM,,Ballet 2,CORAL,45 min\n11:15 AM,,Ballet 4,TEAL,60 min\n11:15 AM,,Jazz 1,BLUE,45 min\n11:30 AM,,Ballet 3,YELLOW,60 min\n12:00 PM,,Hip Hop 1,CORAL,45 min\n12:00 PM,,Jazz 2,BLUE,60 min",
"SUNDAY CLASSES\n9:00 AM,,Beginner Tap Ages 7+,YELLOW,60 min\n9:00 AM,,Dance With Me,BLUE,30 min\n9:15 AM,,Acro 1,BALLROOM,45 min\n9:15 AM,,Creative Movement,TEAL,30 min\n9:30 AM,,Mighty Movers,BLUE,30 min\n9:45 AM,,Ballet 1,TEAL,45 min\n10:00 AM,,Acro 2,BALLROOM,60 min\n10:00 AM,,Mighty Movers,BLUE,30 min\n10:00 AM,,Pre-Comp Tap,YELLOW,60 min\n10:30 AM,,Ballet 1/2,TEAL,45 min\n10:30 AM,,Dance With Me,BLUE,30 min\n11:00 AM,,Acro 3,BALLROOM,60 min\n11:00 AM,,Pre-Comp Jazz,YELLOW,60 min\n11:05 AM,,Hip Hop 1,LILAC,45 min\n11:15 AM,,Ballet 2,TEAL,45 min\n12:00 PM,,Creative Movement,CORAL,30 min\n12:00 PM,,FT Acro C,BALLROOM,90 min\n12:00 PM,,FT Junior Jazz,YELLOW,75 min\n12:00 PM,,Hip Hop 2,BLUE,45 min\n12:15 PM,,Ballet 3,TEAL,60 min\n6:15 PM,,PT Senior Ballet,TEAL,90 min\n7:15 PM,,Musical Theatre 3,BALLROOM,60 min\n7:30 PM,,Sr. Lyrical/Jazz Combo,BLUE,60 min",
"WEDNESDAY CLASSES\n9:45 AM,,Dance With Me,TEAL,45 min\n10:30 AM,,Creative Movement,TEAL,30 min\n4:15 PM,,Acro 3,BALLROOM,60 min\n4:15 PM,,Ballet 4,YELLOW,60 min\n4:15 PM,,Breaking Ages 5-8,BLUE,60 min\n4:15 PM,,PT Mini Jazz,TEAL,60 min\n5:15 PM,,Breaking Ages 9+,CORAL,60 min\n5:15 PM,,FT Jr/Inter Ballet,TEAL,90 min\n5:15 PM,,FT Mini Ballet,YELLOW,75 min\n5:15 PM,,Musical Theatre 1,BALLROOM,45 min\n5:15 PM,,PT Mini Tap,BLUE,60 min\n6:00 PM,,PT Senior Ballet,BALLROOM,75 min\n6:15 PM,,Ballet Technique,CORAL,90 min\n6:15 PM,,PT Jr/Pre-Inter Tap,BLUE,60 min\n6:30 PM,,Hip Hop 2,YELLOW,45 min\n6:45 PM,,FT Mini Jazz,TEAL,90 min\n7:15 PM,,FT Jr/Inter Cont/Lyrical,BALLROOM,60 min\n7:15 PM,,Hip Hop 4/5,BLUE,60 min\n7:15 PM,,PT Pre-Inter Ballet,YELLOW,90 min\n8:15 PM,,FT Inter Jazz,TEAL,75 min",
"THURSDAY CLASSES\n4:15 PM,,Acro 2,BALLROOM,60 min\n4:15 PM,,Acro 4,LILAC,60 min\n4:15 PM,,Ballet 1/2,CORAL,45 min\n4:15 PM,,Novice Tap,BLUE,60 min\n4:30 PM,,Jazz 1,TEAL,45 min\n5:00 PM,,Creative Movement,CORAL,30 min\n5:15 PM,,FT Mini Conditioning,YELLOW,45 min\n5:15 PM,,Musical Theatre 2,TEAL,60 min\n5:15 PM,,PT Inter Musical Theatre,BALLROOM,60 min\n5:15 PM,,Pre-Comp Jazz,BLUE,60 min\n6:00 PM,,Ballet 5/6,YELLOW,75 min\n6:15 PM,,FT Mini Tap,BLUE,60 min\n6:15 PM,,PT Inter Acro,BALLROOM,60 min\n6:15 PM,,PT Pre-Inter Jazz,TEAL,60 min\n6:15 PM,,Pre-Comp Ballet,CORAL,60 min\n7:15 PM,,Contemporary 2,TEAL,60 min\n7:15 PM,,FT Teen Tap,BLUE,60 min\n7:15 PM,,PT Pre-Inter Acro,BALLROOM,60 min\n8:15 PM,,FT Inter Jazz,BALLROOM,75 min\n8:15 PM,,PT Senior Lyrical/Jazz,TEAL,75 min",
"FRIDAY CLASSES\n4:15 PM,,Ballet 3,CORAL,60 min\n4:15 PM,,FT Inter Tap,BLUE,60 min\n4:15 PM,,Hip Hop 1,YELLOW,45 min\n4:15 PM,,PT Junior Ballet,TEAL,60 min\n4:30 PM,,Acro 1,BALLROOM,45 min\n5:00 PM,,Mighty Movers,YELLOW,30 min\n5:15 PM,,FT Junior Ballet,TEAL,75 min\n5:15 PM,,FT Mini/Petite Lyrical,BALLROOM,60 min\n5:30 PM,,Ballet 1/2,YELLOW,45 min\n5:30 PM,,PT Junior Jazz,BLUE,60 min\n6:15 PM,,Ballet 4,YELLOW,60 min\n6:30 PM,,FT Production,BALLROOM,90 min\n6:30 PM,,FT Production,TEAL,90 min\n6:30 PM,,Jazz 2,BLUE,60 min\n7:15 PM,,Tween/Teen Ballet,YELLOW,75 min\n7:30 PM,,Musical Theatre 4,BLUE,60 min\n8:05 PM,,FT Inter Ballet,TEAL,90 min"
];

const DAYS = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'];
const STUDIOS = ['BLUE','BALLROOM','CORAL','YELLOW','TEAL','LILAC'];
const SC = {
  BLUE:     { bg:'#D6EAFF', border:'#2680EB', head:'#1A6DD6', text:'#0C3B6E' },
  BALLROOM: { bg:'#E8E0D6', border:'#7A6850', head:'#5C4D3C', text:'#3B3128' },
  CORAL:    { bg:'#FFD6DA', border:'#F2425A', head:'#E63550', text:'#6b1a27' },
  YELLOW:   { bg:'#FFF0C2', border:'#E8A317', head:'#D49312', text:'#5c3d08' },
  TEAL:     { bg:'#C2F5EB', border:'#12B89A', head:'#0FA885', text:'#0a4a3c' },
  LILAC:    { bg:'#E8DAF8', border:'#8B5CF6', head:'#7340DB', text:'#3B1A6E' },
};

// Time normalization and conversion utilities
const normalizeTime = (s) => {
  if (!s || typeof s !== 'string') return '';
  s = s.trim().toUpperCase();
  
  // Handle military/24hr format like "1400" or "14:00"
  if (/^\d{1,4}$/.test(s)) {
    let hour, min = 0;
    if (s.length <= 2) {
      hour = parseInt(s, 10);
    } else if (s.length === 3) {
      hour = parseInt(s.slice(0, 1), 10);
      min = parseInt(s.slice(1), 10);
    } else {
      hour = parseInt(s.slice(0, 2), 10);
      min = parseInt(s.slice(2), 10);
    }
    const p = hour >= 12 ? 'PM' : 'AM';
    if (hour > 12) hour -= 12;
    if (hour === 0) hour = 12;
    return `${hour}:${String(min).padStart(2, '0')} ${p}`;
  }
  
  // Handle "9am", "9pm", "9AM", "9:00AM" (no space)
  const noSpaceMatch = s.match(/^(\d{1,2}):?(\d{2})?\s*(AM|PM)$/i);
  if (noSpaceMatch) {
    let hour = parseInt(noSpaceMatch[1], 10);
    let min = noSpaceMatch[2] ? parseInt(noSpaceMatch[2], 10) : 0;
    const p = noSpaceMatch[3].toUpperCase();
    return `${hour}:${String(min).padStart(2, '0')} ${p}`;
  }
  
  // Handle "9:00" without AM/PM - assume AM if hour < 12
  const timeOnlyMatch = s.match(/^(\d{1,2}):(\d{2})$/);
  if (timeOnlyMatch) {
    let hour = parseInt(timeOnlyMatch[1], 10);
    let min = parseInt(timeOnlyMatch[2], 10);
    const p = hour >= 12 ? 'PM' : 'AM';
    if (hour > 12) hour -= 12;
    return `${hour}:${String(min).padStart(2, '0')} ${p}`;
  }
  
  // Standard format "9:00 AM" - return as-is
  return s;
};

const toMin = (s) => { 
  if(!s) return 0;
  const normalized = normalizeTime(s);
  const m = normalized.match(/(\d+):(\d+)\s*(AM|PM)/i); 
  if(!m) return 0; 
  let h = +m[1]; 
  const mn = +m[2]; 
  const p = m[3].toUpperCase(); 
  if(h === 12 && p === 'AM') h = 0; 
  if(h !== 12 && p === 'PM') h += 12; 
  return h * 60 + mn; 
};

const fmtTime = (m) => { const h=Math.floor(m/60),mn=m%60,p=h>=12?'PM':'AM'; return (h%12===0?12:h%12)+':'+String(mn).padStart(2,'0')+' '+p; };

// Day normalization
const normalizeDay = (s) => {
  if (!s) return null;
  s = s.toString().trim().toUpperCase();
  // Remove "CLASSES" suffix and extra whitespace
  s = s.replace(/\s*CLASSES?\s*$/, '').trim();
  
  const dayMap = {
    'MONDAY': 'Monday', 'MON': 'Monday', 'M': 'Monday',
    'TUESDAY': 'Tuesday', 'TUES': 'Tuesday', 'TUE': 'Tuesday', 'TU': 'Tuesday',
    'WEDNESDAY': 'Wednesday', 'WED': 'Wednesday', 'W': 'Wednesday',
    'THURSDAY': 'Thursday', 'THURS': 'Thursday', 'THUR': 'Thursday', 'THU': 'Thursday', 'TH': 'Thursday',
    'FRIDAY': 'Friday', 'FRI': 'Friday', 'F': 'Friday',
    'SATURDAY': 'Saturday', 'SAT': 'Saturday', 'SA': 'Saturday',
    'SUNDAY': 'Sunday', 'SUN': 'Sunday', 'SU': 'Sunday'
  };
  
  return dayMap[s] || null;
};

const parseDuration = (s) => { if(!s) return 60; const n=parseInt(s.toString().replace(/\D/g,''),10); return isNaN(n)?60:n; };

const parseRawData = (rawArray) => {
  const out = [];
  rawArray.forEach(csv => {
    const lines = csv.split('\n').map(l=>l.trim()).filter(Boolean);
    let currentDay = DAYS.find(d=>lines[0].toUpperCase().includes(d.toUpperCase()))||'Monday';
    for(let i=0;i<lines.length;i++){
      const line = lines[i];
      // Check for day header
      const dayMatch = normalizeDay(line);
      if(dayMatch) {
        currentDay = dayMatch;
        continue;
      }
      const p=line.split(','); if(p.length<5) continue;
      const time=p[0].trim(),name=p[2].trim(),studio=p[3].trim().toUpperCase();
      const dur=parseDuration(p[4]);
      if(!time||!name) continue;
      const normalizedTime = normalizeTime(time);
      const id = Date.now() + '-' + Math.random().toString(36).substr(2,9);
      out.push({id,day:currentDay,time:normalizedTime,name,studio,duration:dur,startMin:toMin(time),endMin:toMin(time)+dur});
    }
  });
  return out;
};

const ALL = parseRawData(DEFAULT_RAW);

// Ã¢Â”Â€Ã¢Â”Â€ Shared styles Ã¢Â”Â€Ã¢Â”Â€
const thS = { padding:'8px 10px', color:'#fff', fontSize:11, fontWeight:800, letterSpacing:'1px', borderBottom:'none' };
const tdS = { padding:'6px 10px', borderBottom:'1px solid #eee' };
const thG = { padding:'10px 8px', color:'#fff', fontSize:11, fontWeight:800, letterSpacing:'0.5px', textAlign:'center', borderBottom:'2px solid #ddd' };

// Modal Component
function Modal({ title, onClose, children }) {
  const handleKeyDown = (ev) => { if(ev.key==='Escape') onClose(); };
  useEffect(() => { document.addEventListener('keydown', handleKeyDown); return () => document.removeEventListener('keydown', handleKeyDown); }, []);
  return e('div', { className: 'modal-overlay', onClick: onClose },
    e('div', { className: 'modal', onClick: (ev) => ev.stopPropagation() },
      e('div', { className: 'modal-header' }, e('h2', null, title)),
      e('div', { className: 'modal-body' }, children)
    )
  );
}

// Class Form Component
function ClassForm({ initialData, onSave, onCancel, onDelete, studios }) {
  const [form, setForm] = useState(initialData || { day: 'Monday', time: '', name: '', studio: studios[0], duration: 60 });
  const update = (k, v) => setForm(f => ({ ...f, [k]: v }));
  const handleSubmit = (ev) => {
    ev.preventDefault();
    if(!form.time || !form.name) return;
    const time = normalizeTime(form.time);
    const startMin = toMin(time);
    const duration = parseInt(form.duration) || 60;
    onSave({ ...form, time, duration, startMin, endMin: startMin + duration });
  };
  
  return e('form', { onSubmit: handleSubmit },
    e('div', { className: 'form-row' },
      e('div', { className: 'form-group' },
        e('label', null, 'Day'),
        e('select', { value: form.day, onChange: (ev) => update('day', ev.target.value) },
          DAYS.map(d => e('option', { key: d, value: d }, d))
        )
      ),
      e('div', { className: 'form-group' },
        e('label', null, 'Time'),
        e('input', { type: 'text', placeholder: '9:00 AM', value: form.time, onChange: (ev) => update('time', ev.target.value), required: true })
      )
    ),
    e('div', { className: 'form-group' },
      e('label', null, 'Class Name'),
      e('input', { type: 'text', placeholder: 'Ballet 1', value: form.name, onChange: (ev) => update('name', ev.target.value), required: true })
    ),
    e('div', { className: 'form-row' },
      e('div', { className: 'form-group' },
        e('label', null, 'Studio'),
        e('select', { value: form.studio, onChange: (ev) => update('studio', ev.target.value) },
          studios.map(s => e('option', { key: s, value: s }, s))
        )
      ),
      e('div', { className: 'form-group' },
        e('label', null, 'Duration (min)'),
        e('input', { type: 'number', min: 5, max: 300, value: form.duration, onChange: (ev) => update('duration', parseInt(ev.target.value)||60), required: true })
      )
    ),
    e('div', { className: 'modal-footer', style: { padding: 0, border: 'none', marginTop: 20 } },
      onDelete && e('button', { type: 'button', className: 'btn btn-danger', onClick: onDelete }, 'Delete'),
      e('button', { type: 'button', className: 'btn btn-secondary', onClick: onCancel }, 'Cancel'),
      e('button', { type: 'submit', className: 'btn btn-primary' }, initialData ? 'Save Changes' : 'Add Class')
    )
  );
}

// CSV Upload Component with Column Mapping
function CSVUpload({ onUpload, onClose }) {
  const [content, setContent] = useState('');
  const [isDragging, setIsDragging] = useState(false);
  const [headers, setHeaders] = useState([]);
  const [rows, setRows] = useState([]);
  const [mapping, setMapping] = useState({});
  const [hasHeader, setHasHeader] = useState(true);
  const [previewData, setPreviewData] = useState([]);
  const fileInputRef = useRef();
  
  const FIELD_OPTIONS = [
    { value: '', label: '-- Select Field --' },
    { value: 'day', label: 'Day (optional - can auto-detect from header)' },
    { value: 'time', label: 'Time (required)' },
    { value: 'name', label: 'Class Name (required)' },
    { value: 'studio', label: 'Studio (required)' },
    { value: 'duration', label: 'Duration (required)' },
    { value: 'ignore', label: '-- Ignore Column --' }
  ];
  
  // Auto-detect header names
  const detectField = (header) => {
    const h = header.toLowerCase().trim();
    if (h.includes('day') || h.includes('date')) return 'day';
    if (h.includes('time') || h.includes('hour')) return 'time';
    if (h.includes('class') || h.includes('name') || h.includes('title')) return 'name';
    if (h.includes('studio') || h.includes('room') || h.includes('location')) return 'studio';
    if (h.includes('dur') || h.includes('length') || h.includes('minutes')) return 'duration';
    return '';
  };
  
  const parseCSVLine = (line) => {
    const result = [];
    let inQuotes = false;
    let current = '';
    
    for (let i = 0; i < line.length; i++) {
      const char = line[i];
      const nextChar = line[i + 1];
      
      if (char === '"') {
        // Handle escaped quote inside quoted field: ""
        if (inQuotes && nextChar === '"') {
          current += '"';
          i++;
        } else {
          inQuotes = !inQuotes;
        }
      } else if (char === ',' && !inQuotes) {
        result.push(current.trim());
        current = '';
      } else {
        current += char;
      }
    }
    
    result.push(current.trim());
    return result;
  };
  
  const handleFile = (file) => {
    if(!file || (file.type !== 'text/csv' && !file.name.endsWith('.csv'))) return;
    const reader = new FileReader();
    reader.onload = (e) => {
      const text = e.target.result;
      setContent(text);
      processCSVContent(text, true);
    };
    reader.readAsText(file);
  };
  
  const processCSVContent = (text, assumeHeader = true) => {
    const normalizedText = text.replace(/^\uFEFF/, '');
    const lines = normalizedText.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
    if (lines.length === 0) return;
    
    const firstRow = parseCSVLine(lines[0]);
    const isHeader = assumeHeader && firstRow.some(cell => 
      /(day|date|time|hour|class|name|title|studio|room|location|dur|length|minutes)/i.test(cell.trim())
    );
    
    setHasHeader(isHeader);
    
    if (isHeader) {
      setHeaders(firstRow);
      const autoMapping = {};
      firstRow.forEach((h, i) => {
        const detected = detectField(h);
        if (detected) autoMapping[i] = detected;
      });
      setMapping(autoMapping);
      setRows(lines.slice(1).map(parseCSVLine));
    } else {
      // Generate generic column names
      setHeaders(firstRow.map((_, i) => `Column ${i + 1}`));
      setMapping({});
      setRows(lines.map(parseCSVLine));
    }
  };
  
  const updateMapping = (colIndex, field) => {
    setMapping(m => ({ ...m, [colIndex]: field }));
  };
  
  const getMappedCol = (field) => {
    const entry = Object.entries(mapping).find(([_, v]) => v === field);
    return entry ? parseInt(entry[0], 10) : undefined;
  };
  
  const generatePreview = () => {
    const dayCol = getMappedCol('day');
    const timeCol = getMappedCol('time');
    const nameCol = getMappedCol('name');
    const studioCol = getMappedCol('studio');
    const durationCol = getMappedCol('duration');
    
    const mappedRows = [];
    let currentDay = 'Monday';
    
    rows.slice(0, 5).forEach(row => {
      const rowText = row.join(' ').trim();
      const dayHeader = normalizeDay(rowText);
      if (dayHeader) { currentDay = dayHeader; return; }
      
      if (dayCol !== undefined && row[dayCol]) {
        const nd = normalizeDay(row[dayCol]);
        if (nd) currentDay = nd;
      }
      
      const timeRaw = timeCol !== undefined ? (row[timeCol] || '') : '';
      const time = normalizeTime(timeRaw);
      const name = nameCol !== undefined ? (row[nameCol] || '') : '';
      const studio = studioCol !== undefined ? (row[studioCol] || '') : '';
      const duration = durationCol !== undefined ? parseDuration(row[durationCol]) : 60;
      
      if (time && name) {
        mappedRows.push({ day: currentDay, time, name, studio, duration });
      }
    });
    
    setPreviewData(mappedRows);
  };
  
  useEffect(() => {
    if (rows.length > 0 && Object.keys(mapping).length > 0) {
      generatePreview();
    }
  }, [mapping, rows]);
  
  const handleDrop = (e) => { e.preventDefault(); setIsDragging(false); const file = e.dataTransfer.files[0]; handleFile(file); };
  const handleDragOver = (e) => { e.preventDefault(); setIsDragging(true); };
  const handleDragLeave = () => setIsDragging(false);
  
  const parseCSV = () => {
    const dayCol = getMappedCol('day');
    const timeCol = getMappedCol('time');
    const nameCol = getMappedCol('name');
    const studioCol = getMappedCol('studio');
    const durationCol = getMappedCol('duration');
    
    if (timeCol === undefined || nameCol === undefined || studioCol === undefined || durationCol === undefined) {
      alert('Please map Time, Class Name, Studio, and Duration columns');
      return;
    }
    
    const classes = [];
    let currentDay = 'Monday';
    
    rows.forEach(row => {
      const rowText = row.join(' ').trim();
      const dayHeader = normalizeDay(rowText);
      if (dayHeader) { currentDay = dayHeader; return; }
      
      if (dayCol !== undefined && row[dayCol]) {
        const nd = normalizeDay(row[dayCol]);
        if (nd) currentDay = nd;
      }
      
      const timeRaw = (row[timeCol] || '').trim();
      const name = (row[nameCol] || '').trim();
      const studio = (row[studioCol] || '').trim().toUpperCase();
      const dur = parseDuration(row[durationCol]);
      
      if(!timeRaw || !name || !studio) return;
      
      const time = normalizeTime(timeRaw);
      const startMin = toMin(time);
      
      classes.push({
        id: Date.now() + '-' + Math.random().toString(36).substr(2,9),
        day: currentDay, time, name, studio, duration: dur,
        startMin, endMin: startMin + dur
      });
    });
    
    onUpload(classes);
  };
  
  const reset = () => {
    setContent('');
    setHeaders([]);
    setRows([]);
    setMapping({});
    setPreviewData([]);
  };
  
  const hasRequiredFields = () => {
    const mapped = Object.values(mapping);
    return mapped.includes('time') && mapped.includes('name') && 
           mapped.includes('studio') && mapped.includes('duration');
  };
  
  return e(Modal, { title: 'Upload CSV with Column Mapping', onClose },
    !content ? e('div', {
      className: 'csv-dropzone' + (isDragging ? ' dragover' : ''),
      onClick: () => fileInputRef.current?.click(),
      onDrop: handleDrop,
      onDragOver: handleDragOver,
      onDragLeave: handleDragLeave
    },
      e('input', { type: 'file', accept: '.csv', ref: fileInputRef, style: { display: 'none' }, onChange: (ev) => handleFile(ev.target.files[0]) }),
      e('p', null, e('strong', null, 'Click to upload'), ' or drag and drop CSV file'),
      e('p', { style: { fontSize: 12, marginTop: 8, color: '#888' } }, 'Supports any CSV format with column mapping')
    ) : e('div', null,
      e('div', { style: { marginBottom: 16 } },
        e('p', { style: { fontSize: 14, marginBottom: 12 } }, 'Detected ' + rows.length + ' data rows. Please map your CSV columns to the required fields:'),
        e('label', { style: { display: 'flex', alignItems: 'center', gap: 8, fontSize: 13, cursor: 'pointer' } },
          e('input', { type: 'checkbox', checked: hasHeader, onChange: (ev) => {
            setHasHeader(ev.target.checked);
            processCSVContent(content, ev.target.checked);
          } }),
          'First row is header'
        )
      ),
      e('div', { style: { maxHeight: 200, overflowY: 'auto', border: '1px solid #e5e7eb', borderRadius: 8, marginBottom: 16 } },
        e('table', { style: { width: '100%', fontSize: 12, borderCollapse: 'collapse' } },
          e('thead', null,
            e('tr', { style: { background: '#f8f9fb' } },
              e('th', { style: { padding: '8px', borderBottom: '2px solid #ddd', textAlign: 'left' } }, 'CSV Column'),
              e('th', { style: { padding: '8px', borderBottom: '2px solid #ddd', textAlign: 'left' } }, 'Map to Field')
            )
          ),
          e('tbody', null,
            headers.map((h, i) =>
              e('tr', { key: i },
                e('td', { style: { padding: '6px 8px', borderBottom: '1px solid #eee' } }, h || `(Column ${i + 1})`),
                e('td', { style: { padding: '6px 8px', borderBottom: '1px solid #eee' } },
                  e('select', { 
                    value: mapping[i] || '', 
                    onChange: (ev) => updateMapping(i, ev.target.value),
                    style: { padding: '4px 8px', borderRadius: 4, border: '1px solid #ddd', fontSize: 12 }
                  }, FIELD_OPTIONS.map(opt => e('option', { key: opt.value, value: opt.value }, opt.label)))
                )
              )
            )
          )
        )
      ),
      previewData.length > 0 && e('div', { style: { marginBottom: 16 } },
        e('p', { style: { fontSize: 13, fontWeight: 600, marginBottom: 8 } }, 'Preview (first ' + previewData.length + ' mapped rows):'),
        e('div', { style: { maxHeight: 120, overflowY: 'auto', border: '1px solid #e5e7eb', borderRadius: 8 } },
          e('table', { style: { width: '100%', fontSize: 11, borderCollapse: 'collapse' } },
            e('thead', null,
              e('tr', { style: { background: '#f0f1f4' } },
                e('th', { style: { padding: '4px 6px', textAlign: 'left' } }, 'Day'),
                e('th', { style: { padding: '4px 6px', textAlign: 'left' } }, 'Time'),
                e('th', { style: { padding: '4px 6px', textAlign: 'left' } }, 'Name'),
                e('th', { style: { padding: '4px 6px', textAlign: 'left' } }, 'Studio'),
                e('th', { style: { padding: '4px 6px', textAlign: 'left' } }, 'Duration')
              )
            ),
            e('tbody', null,
              previewData.map((row, i) =>
                e('tr', { key: i },
                  e('td', { style: { padding: '3px 6px', borderBottom: '1px solid #f0f0f0' } }, row.day),
                  e('td', { style: { padding: '3px 6px', borderBottom: '1px solid #f0f0f0' } }, row.time),
                  e('td', { style: { padding: '3px 6px', borderBottom: '1px solid #f0f0f0' } }, row.name),
                  e('td', { style: { padding: '3px 6px', borderBottom: '1px solid #f0f0f0' } }, row.studio),
                  e('td', { style: { padding: '3px 6px', borderBottom: '1px solid #f0f0f0' } }, row.duration + ' min')
                )
              )
            )
          )
        )
      ),
      !hasRequiredFields() && e('p', { style: { color: '#E63550', fontSize: 12, marginBottom: 12 } }, 
        'Please map all required fields: Time, Class Name, Studio, Duration'
      ),
      e('div', { className: 'modal-footer' },
        e('button', { className: 'btn btn-secondary', onClick: reset }, 'Back'),
        e('button', { 
          className: 'btn btn-success', 
          onClick: parseCSV, 
          disabled: !hasRequiredFields(),
          style: !hasRequiredFields() ? { opacity: 0.5, cursor: 'not-allowed' } : {}
        }, 'Import ' + rows.filter(r => r.join('').trim()).length + ' Rows')
      )
    )
  );
}

// â”€â”€ List View â”€â”€
function ListView({ classes, day, onEdit, onDelete }) {
  const groups = useMemo(() => {
    const g=[]; let lastMin=null;
    classes.forEach(c => { if(c.startMin!==lastMin){g.push({time:c.time,startMin:c.startMin,items:[]});lastMin=c.startMin;} g[g.length-1].items.push(c); });
    return g;
  }, [classes]);

  return e('div', { className:'print-content' },
    e('div', { style:{display:'flex',justifyContent:'space-between',alignItems:'flex-end',borderBottom:'3px solid #1a1a2e',paddingBottom:8,marginBottom:16} },
      e('div', null,
        e('div', { style:{fontSize:32,fontWeight:900,letterSpacing:'-0.5px',color:'#1a1a2e',lineHeight:1} }, day.toUpperCase()+' CLASS SCHEDULE'),
        e('div', { style:{fontSize:13,color:'#666',marginTop:4,fontWeight:500} }, 'Leslieville School of Dance & Music Â· '+classes.length+' classes')
      ),
      e('div', { style:{textAlign:'right'} },
        e('div', { style:{fontSize:11,color:'#999',fontWeight:600} }, '1461 Gerrard St E'),
        e('div', { style:{fontSize:11,color:'#999'} }, 'danceandmusic.ca')
      )
    ),
    e('div', { style:{display:'flex',gap:12,marginBottom:16,flexWrap:'wrap'} },
      STUDIOS.map(s => {
        if(!classes.some(c=>c.studio===s)) return null;
        return e('div', { key:s, style:{display:'flex',alignItems:'center',gap:5} },
          e('div', { style:{width:12,height:12,borderRadius:3,background:SC[s].head,border:'1px solid '+SC[s].border} }),
          e('span', { style:{fontSize:11,fontWeight:700,color:'#444',letterSpacing:'0.5px'} }, s)
        );
      })
    ),
    e('table', { style:{width:'100%',borderCollapse:'collapse',fontSize:13} },
      e('thead', null,
        e('tr', { style:{background:'#1a1a2e'} },
          e('th', { style:{...thS,width:110,textAlign:'left'} }, 'TIME'),
          e('th', { style:{...thS,textAlign:'left'} }, 'CLASS'),
          e('th', { style:{...thS,width:120,textAlign:'center'} }, 'STUDIO'),
          e('th', { style:{...thS,width:80,textAlign:'center'} }, 'DURATION'),
          e('th', { style:{...thS,width:100,textAlign:'center'} }, 'ENDS'),
          e('th', { style:{...thS,width:80,textAlign:'center'} }, 'ACTIONS')
        )
      ),
      e('tbody', null,
        groups.map((g,gi) => g.items.map((cls,ci) => {
          const sc=SC[cls.studio]||{bg:'#f5f5f5',border:'#ccc',text:'#333'};
          const isFirst=ci===0; const isAlt=gi%2===1;
          return e('tr', { key:cls.id, style:{background:isAlt?'#f8f9fb':'#fff', borderTop:isFirst&&gi>0?'2px solid #e2e5ea':undefined} },
            e('td', { style:{...tdS,fontWeight:isFirst?800:400,fontSize:isFirst?14:13,color:isFirst?'#1a1a2e':'#999',verticalAlign:'top',paddingTop:isFirst?10:6} }, isFirst?cls.time:''),
            e('td', { style:{...tdS,fontWeight:700,fontSize:14,color:sc.text,paddingTop:isFirst?10:6} }, cls.name),
            e('td', { style:{...tdS,textAlign:'center',paddingTop:isFirst?10:6} },
              e('span', { style:{display:'inline-block',padding:'2px 10px',borderRadius:4,background:sc.bg,border:'1.5px solid '+sc.border,fontSize:11,fontWeight:800,color:sc.text,letterSpacing:'0.5px'} }, cls.studio)
            ),
            e('td', { style:{...tdS,textAlign:'center',fontWeight:600,color:'#555',paddingTop:isFirst?10:6} }, cls.duration+' min'),
            e('td', { style:{...tdS,textAlign:'center',color:'#888',fontWeight:500,paddingTop:isFirst?10:6} }, fmtTime(cls.endMin)),
            e('td', { style:{...tdS,textAlign:'center',paddingTop:isFirst?10:6} },
              e('div', { className: 'action-btn', style: { display: 'flex', gap: 4, justifyContent: 'center' } },
                e('button', { onClick: () => onEdit(cls), style: { background: 'none', border: 'none', fontSize: 14, cursor: 'pointer', padding: 2 }, title: 'Edit' }, 'âœï¸'),
                e('button', { onClick: () => onDelete(cls), style: { background: 'none', border: 'none', fontSize: 14, cursor: 'pointer', padding: 2 }, title: 'Delete' }, 'ðŸ—‘ï¸')
              )
            )
          );
        }))
      )
    )
  );
}

// Ã¢Â”Â€Ã¢Â”Â€ Grid View Ã¢Â”Â€Ã¢Â”Â€
function GridView({ classes, day, onEdit, onDelete }) {
  const active = useMemo(() => STUDIOS.filter(s=>classes.some(c=>c.studio===s)), [classes]);
  const byStudio = useMemo(() => { const m={}; active.forEach(s=>m[s]=classes.filter(c=>c.studio===s)); return m; }, [classes,active]);
  const times = useMemo(() => [...new Set(classes.map(c=>c.startMin))].sort((a,b)=>a-b), [classes]);

  return e('div', { className:'print-content' },
    e('div', { style:{display:'flex',justifyContent:'space-between',alignItems:'flex-end',borderBottom:'3px solid #1a1a2e',paddingBottom:8,marginBottom:12} },
      e('div', null,
        e('div', { style:{fontSize:30,fontWeight:900,letterSpacing:'-0.5px',color:'#1a1a2e',lineHeight:1} }, day.toUpperCase()+' â€” BY STUDIO'),
        e('div', { style:{fontSize:12,color:'#666',marginTop:4,fontWeight:500} }, 'Leslieville School of Dance & Music Â· '+classes.length+' classes Â· '+active.length+' studios')
      ),
      e('div', { style:{textAlign:'right'} },
        e('div', { style:{fontSize:11,color:'#999',fontWeight:600} }, '1461 Gerrard St E'),
        e('div', { style:{fontSize:11,color:'#999'} }, 'danceandmusic.ca')
      )
    ),
    e('table', { style:{width:'100%',borderCollapse:'collapse',tableLayout:'fixed'} },
      e('thead', null,
        e('tr', null,
          e('th', { style:{...thG,width:90,background:'#1a1a2e'} }, 'TIME'),
          active.map(s => e('th', { key:s, style:{...thG,background:SC[s].head,letterSpacing:'1px'} }, s))
        )
      ),
      e('tbody', null,
        times.map((t,ti) =>
          e('tr', { key:t, style:{background:ti%2===1?'#f8f9fb':'#fff'} },
            e('td', { style:{padding:'8px 6px',borderBottom:'1px solid #e8e8e8',borderRight:'2px solid #ddd',fontSize:13,fontWeight:800,color:'#1a1a2e',textAlign:'right',verticalAlign:'top',whiteSpace:'nowrap'} }, fmtTime(t)),
            active.map(s => {
              const items=(byStudio[s]||[]).filter(c=>c.startMin===t); const sc=SC[s];
              return e('td', { key:s, style:{padding:4,borderBottom:'1px solid #e8e8e8',borderRight:'1px solid #eee',verticalAlign:'top'} },
                items.map(cls =>
                  e('div', { key:cls.id, style:{background:sc.bg,borderLeft:'4px solid '+sc.border,borderRadius:4,padding:'5px 8px',marginBottom:items.length>1?3:0,position:'relative'} },
                    e('div', { className: 'action-btn', style: { position: 'absolute', top: 2, right: 2, display: 'flex', gap: 2 } },
                      e('button', { onClick: (e) => { e.stopPropagation(); onEdit(cls); }, style: { background: 'rgba(255,255,255,0.8)', border: 'none', borderRadius: 3, fontSize: 11, cursor: 'pointer', padding: '1px 3px', lineHeight: 1 }, title: 'Edit' }, 'âœï¸'),
                      e('button', { onClick: (e) => { e.stopPropagation(); onDelete(cls); }, style: { background: 'rgba(255,255,255,0.8)', border: 'none', borderRadius: 3, fontSize: 11, cursor: 'pointer', padding: '1px 3px', lineHeight: 1 }, title: 'Delete' }, 'ðŸ—‘ï¸')
                    ),
                    e('div', { style:{fontSize:13,fontWeight:700,color:sc.text,lineHeight:1.2,paddingRight:20} }, cls.name),
                    e('div', { style:{fontSize:10,color:sc.text+'aa',fontWeight:600,marginTop:2} }, cls.duration+'m â†’ '+fmtTime(cls.endMin))
                  )
                )
              );
            })
          )
        )
      )
    )
  );
}

// Ã¢Â”Â€Ã¢Â”Â€// Ã¢Â”Â€Ã¢Â”Â€ Main App Ã¢Â”Â€Ã¢Â”Â€
function App() {
  const [data, setData] = useState(() => {
    const saved = localStorage.getItem('lsdm-schedule');
    if(saved) return JSON.parse(saved);
    return ALL;
  });
  
  const [day, setDay] = useState(() => { const d=new Date().getDay(); return DAYS[d===0?6:d-1]; });
  const [view, setView] = useState('list');
  const [modal, setModal] = useState(null);
  const [editingClass, setEditingClass] = useState(null);
  
  useEffect(() => { localStorage.setItem('lsdm-schedule', JSON.stringify(data)); }, [data]);
  
  const classes = useMemo(() => data.filter(c=>c.day===day).sort((a,b)=>a.startMin-b.startMin||a.name.localeCompare(b.name)), [data, day]);
  const prev = () => setDay(DAYS[(DAYS.indexOf(day)-1+7)%7]);
  const next = () => setDay(DAYS[(DAYS.indexOf(day)+1)%7]);
  
  const addClass = (cls) => {
    const newClass = { ...cls, id: Date.now() + '-' + Math.random().toString(36).substr(2,9) };
    setData(d => [...d, newClass]);
    setModal(null);
  };
  
  const updateClass = (cls) => {
    setData(d => d.map(c => c.id === editingClass.id ? { ...cls, id: c.id } : c));
    setModal(null);
    setEditingClass(null);
  };
  
  const deleteClass = (cls) => {
    if(confirm('Delete "' + cls.name + '" at ' + cls.time + '?')) {
      setData(d => d.filter(c => c.id !== cls.id));
      setModal(null);
      setEditingClass(null);
    }
  };
  
  const handleEdit = (cls) => { setEditingClass(cls); setModal('edit'); };
  const handleDelete = (cls) => deleteClass(cls);
  
  const handleCSVUpload = (newClasses) => {
    if(confirm('Import ' + newClasses.length + ' classes? This will replace all existing data.')) {
      setData(newClasses);
      setModal(null);
    }
  };
  
  const exportCSV = () => {
    const grouped = {};
    data.forEach(c => { if(!grouped[c.day]) grouped[c.day] = []; grouped[c.day].push(c); });
    let csv = '';
    DAYS.forEach(d => {
      if(!grouped[d] || grouped[d].length === 0) return;
      csv += d.toUpperCase() + ' CLASSES\n';
      grouped[d].sort((a,b)=>a.startMin-b.startMin).forEach(c => {
        csv += c.time + ',,"' + c.name + '",' + c.studio + ',' + c.duration + ' min\n';
      });
      csv += '\n';
    });
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'lsdm-schedule.csv';
    a.click();
    URL.revokeObjectURL(url);
  };
  
  const resetData = () => {
    if(confirm('Reset to default schedule? All custom changes will be lost.')) {
      setData(ALL);
    }
  };
  
  const nb = { background:'transparent', border:'none', color:'rgba(255,255,255,0.4)', padding:6, borderRadius:6, display:'flex', alignItems:'center' };
  const tb = (a) => ({ display:'flex', alignItems:'center', gap:5, padding:'6px 14px', borderRadius:6, border:'none', fontSize:12, fontWeight:700, background:a?'rgba(255,255,255,0.15)':'transparent', color:a?'#fff':'rgba(255,255,255,0.4)', transition:'all 0.15s' });

  return e('div', { style:{minHeight:'100vh',background:'#f0f1f4'} },
    // Toolbar
    e('div', { className:'no-print', style:{background:'linear-gradient(135deg,#1a1a2e 0%,#16213e 100%)',padding:'12px 20px',display:'flex',alignItems:'center',justifyContent:'space-between',flexWrap:'wrap',gap:12} },
      e('div', { style:{display:'flex',alignItems:'center',gap:4} },
        e('button', { onClick:prev, style:nb }, 'â®'),
        DAYS.map(d => {
          const a=d===day, has=data.some(c=>c.day===d);
          return e('button', { key:d, onClick:()=>setDay(d), style:{padding:'6px 12px',borderRadius:8,border:'none',fontSize:12,fontWeight:a?800:600,letterSpacing:'0.5px',background:a?'#fff':'transparent',color:a?'#1a1a2e':has?'rgba(255,255,255,0.6)':'rgba(255,255,255,0.2)',transition:'all 0.15s'} }, d.slice(0,3));
        }),
        e('button', { onClick:next, style:nb }, 'â¯')
      ),
      e('div', { style:{display:'flex',alignItems:'center',gap:8} },
        e('div', { style:{display:'flex',background:'rgba(255,255,255,0.08)',borderRadius:8,padding:2,border:'1px solid rgba(255,255,255,0.1)'} },
          e('button', { onClick:()=>setView('list'), style:tb(view==='list') }, 'â˜° List'),
          e('button', { onClick:()=>setView('grid'), style:tb(view==='grid') }, 'âŠž Grid')
        ),
        e('button', { onClick:()=>setModal('add'), style:{display:'flex',alignItems:'center',gap:6,padding:'8px 16px',borderRadius:8,background:'#12B89A',color:'#fff',border:'none',fontSize:13,fontWeight:700} }, '+ Add'),
        e('button', { onClick:()=>setModal('csv'), style:{display:'flex',alignItems:'center',gap:6,padding:'8px 16px',borderRadius:8,background:'#2680EB',color:'#fff',border:'none',fontSize:13,fontWeight:700} }, 'â†‘ CSV'),
        e('button', { onClick:exportCSV, style:{display:'flex',alignItems:'center',gap:6,padding:'8px 16px',borderRadius:8,background:'rgba(255,255,255,0.1)',color:'#fff',border:'1px solid rgba(255,255,255,0.2)',fontSize:13,fontWeight:700} }, 'â†“ Export'),
        e('button', { onClick:()=>window.print(), style:{display:'flex',alignItems:'center',gap:6,padding:'8px 20px',borderRadius:8,background:'#E63550',color:'#fff',border:'none',fontSize:13,fontWeight:700} }, 'ðŸ–¨ Print')
      )
    ),
    // Content
    e('div', { className:'print-area', style:{maxWidth:1200,margin:'0 auto',padding:24} },
      classes.length === 0
        ? e('div', { style:{textAlign:'center',padding:80,color:'#aaa'} },
            e('div', { style:{fontSize:48,marginBottom:12} }, 'ðŸ“‹'),
            e('div', { style:{fontSize:18,fontWeight:700} }, 'No classes scheduled for ' + day),
            e('button', { onClick:()=>setModal('add'), style:{marginTop:20,padding:'10px 24px',borderRadius:8,background:'#12B89A',color:'#fff',border:'none',fontSize:14,fontWeight:700,cursor:'pointer'} }, '+ Add Your First Class')
          )
        : view === 'list'
          ? e(ListView, { classes, day, onEdit: handleEdit, onDelete: handleDelete })
          : e(GridView, { classes, day, onEdit: handleEdit, onDelete: handleDelete })
    ),
    // Reset link
    data.length !== ALL.length && e('div', { className: 'no-print', style: { textAlign: 'center', padding: '20px' } },
      e('button', { onClick: resetData, style: { background: 'none', border: 'none', color: '#E63550', cursor: 'pointer', textDecoration: 'underline', fontSize: 12 } }, 'Reset to Default')
    ),
    // Modals
    modal === 'add' && e(Modal, { title: 'Add New Class', onClose: () => setModal(null) },
      e(ClassForm, { studios: STUDIOS, onSave: addClass, onCancel: () => setModal(null) })
    ),
    modal === 'edit' && editingClass && e(Modal, { title: 'Edit Class', onClose: () => { setModal(null); setEditingClass(null); } },
      e(ClassForm, { initialData: editingClass, studios: STUDIOS, onSave: updateClass, onCancel: () => { setModal(null); setEditingClass(null); }, onDelete: () => deleteClass(editingClass) })
    ),
    modal === 'csv' && e(CSVUpload, { onUpload: handleCSVUpload, onClose: () => setModal(null) })
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(e(App));
</script>
</body>
</html>
